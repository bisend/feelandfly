<?php
/**
 * Created by PhpStorm.
 * User: vlad_
 * Date: 14.12.2017
 * Time: 12:47
 */

namespace App\Services;

use App\Repositories\CategoryRepository;
use App\Repositories\ProfileRepository;
use App\Repositories\UserRepository;

class ProfileService extends LayoutService
{
    protected $userRepository;
    
    protected $profileRepository;
    
    public function __construct(CategoryRepository $categoryRepository, 
                                UserRepository $userRepository, 
                                ProfileRepository $profileRepository)
    {
        parent::__construct($categoryRepository);
        
        $this->userRepository = $userRepository;
        
        $this->profileRepository = $profileRepository;
    }
    
    public function fill($model)
    {
        parent::fill($model); // TODO: Change the autogenerated stub
    }
    
    public function saveUserName($userId, $name)
    {
        $this->userRepository->saveUserName($userId, $name);
    }
    
    public function saveProfilePhoneNumber($userId, $phone)
    {
        $this->profileRepository->saveProfilePhoneNumber($userId, $phone);
    }

    public function checkIfEmailChanged($userId, $email)
    {
        return $this->userRepository->checkIfEmailChanged($userId, $email);
    }

    public function checkIfNewEmailValid($email)
    {
        return $this->userRepository->checkIfNewEmailValid($email);
    }

    public function saveNewEmail($userId, $email)
    {
        $this->userRepository->saveNewEmail($userId, $email);
    }
    
    public function changePassword($userId, $newPassword)
    {
        $this->userRepository->changePassword($userId, $newPassword);
    }
}